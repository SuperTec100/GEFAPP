<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { 
    getAuth, 
    onAuthStateChanged,
    signOut,
    setPersistence,
    browserSessionPersistence
  } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyC-VBHoQW0b5y0lmxRkIAj-ciAbuwF3YW8",
    authDomain: "gef-app1.firebaseapp.com",
    projectId: "gef-app1",
    storageBucket: "gef-app1.appspot.com",
    messagingSenderId: "625530882269",
    appId: "1:625530882269:web:c47d79aa16508cb855b334"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Configurar persistência como SESSION
  setPersistence(auth, browserSessionPersistence);

  onAuthStateChanged(auth, (user) => {
    if (!user || user.email !== "admin@gef.com") {
      window.location.href = "index.html";
    }
  });

  window.removeUser = function(username) {
    if (confirm("Deseja realmente remover o usuário " + username + "?")) {
      const users = JSON.parse(sessionStorage.getItem("users")) || {};
      delete users[username];
      sessionStorage.setItem("users", JSON.stringify(users));
      location.reload();
    }
  };

  window.logout = function() {
    signOut(auth).then(() => {
      sessionStorage.clear();
      window.location.href = "index.html";
    });
  };
</script>
